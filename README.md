# FoxTyping

## 概要

初心者からタイパーまで遊べるタイピングゲームを作る

## 機能とか

### 入力方法

ローマ字、英文の2種類を用意するつもり（余裕があればかな入力も）。

ローマ字のレギュレーション: ひらがな、数字、伸ばし棒、句読点、読点（1キーで1文字）
英文のレギュレーション: 英文に出てきそうなもの

とりあえずローマ字を先に実装する

英文は例文が欲しい

### 文章

完全な文を考えて逐一登録するのは大変なので、短いワードをくっつけて文章を生成する（前半の語群からランダム + 後半の語群からランダム みたいにする）。

Issue に案が書いてある

### タイピングワード投稿機能

語をユーザに投稿してもらうと手間が省けそう。

あまり望ましくないワード（公序良俗に反する、宗教的な観点からNGなワード、単純に打ちにくすぎるワード、滅多に出てこない「きぇ」とか「ゑ」みたいなのを含む）は弾かないといけないので実装するかどうか悩む。

### ミスタイプ

ミスタイプの多いキーを表示したい。

余裕があれば入力の速い文字、遅い文字を表示みたいな機能も。

### Practice モード

初めての人向け。ひらがな1文字単位で打つとか。

### Easy, Normal, Lunatic モード

違いは以下の通り

- 文章の長さ
  - Normal / Lunatic: ランダム語群連結システム
  - Easy: 語群から1つランダムに選択
- ローマ字表示
  - Lunatic: なし（すでに打ち終わった文字を表示、ミスタイプを表示）
  - Easy / Normal: まだ打っていない文字を全て表示(e-typing 風)

### Lunatic モードについて

指定速度以上かつノーミスで打ち続けるライフ制モード。

### スコア表示

1プレイスコア = kpm x (1.05 + MAX(-1.00, k * log(Accuracy)))

k = 1 + 2284815.0 / 2406151.0

Accuracy 1.00 なら kpm x 1.05、Accuracy 0.95 だと kpm と一致。

Accuracy 0.95 で 1kpm あげると 1 ポイント上がるような計算式でそれなりに意味を持たせている

95% 以上の正確さなら毎パソの「特別点」的な感じでボーナス点をあげたい

Normal モードかつ20文以上であればこの式をそのまま適用する。

#### ペナルティ

1. Easy モードに対するペナルティ

もとのスコアをx, 新しいスコアをy, c=1200 として

y = -(c^2) / (x + c) + c

で定める。200kpm 付近まではあまり割り引かないが、速くなるとどんどん割引率が上がる（双曲線関数）。

2. 20文未満に対するペナルティ

もとのスコアの (-15.0 / (tasks + 10.0) + 1.5) 倍。

分かりにくいが目安として、5文なら50%、10文なら75%、15文なら90%。

### レーティング機能

~~スコアの Best 10 の合計値でレートをつけることにする（音ゲーっぽい）。~~

考察し直し中。イロレーティングシステムを導入しようかと思っている。

### ランキング機能

レーティング機能つけるならレートによってランキングつけると良さそう

これはユーザとデータを紐づける仕組みが必要

### レートグラフ化

レートの上昇をグラフ化できたら面白そう

### SNS 連携

したいよね

## デザイン, インタフェース関連

### 操作

キーボードだけで操作が完結するが、一応マウスでもOKみたいなスタンス（本当はタイピングゲームなのでキーボードで全部済ませて欲しい！という気持ちがある）

### モチーフ

今のところはチーター（ロゴとか背景とか）

### お借りした素材

- フォント : http://www.font910.jp/font-list/conposite-comic.html
- SE, BGM : まだ借りてない
